---
title: "Context Monitoring"
description: "Track and manage context window usage to prevent context overflow"
icon: "eye"
---

# Context Monitoring

CLEO includes built-in context monitoring to help AI agents track their context window usage and take action before hitting limits.

## Why Context Monitoring?

<Info>
AI agents have limited context windows. Exceeding the limit causes loss of conversation history and task context. CLEO's context safeguard system provides early warnings and recovery strategies.
</Info>

## Quick Start

```bash
# Check context usage
cleo context

# Silent check with exit codes
cleo context check
```

Output shows visual indicators:

```
Context Usage: 65% (OK)
Tokens: 52,000 / 80,000
Status: Continue working normally
```

## Exit Codes

The `context check` command returns exit codes for scripting:

| Code | Status | Usage | Recommended Action |
|------|--------|-------|-------------------|
| `0` | OK | <70% | Continue normally |
| `50` | Warning | 70-84% | Consider summarizing |
| `51` | Caution | 85-89% | Prepare to compact |
| `52` | Critical | 90-94% | Compact now |
| `53` | Emergency | 95%+ | Emergency save |
| `54` | Stale | No data | Update context tracking |

<Tabs>
  <Tab title="Bash Usage">
    ```bash
    cleo context check
    case $? in
      0)  echo "OK - continue" ;;
      50) echo "Warning - consider summarizing" ;;
      51) echo "Caution - prepare to compact" ;;
      52) echo "Critical - compact now" ;;
      53) echo "Emergency - save work immediately" ;;
    esac
    ```
  </Tab>
  <Tab title="JSON Output">
    ```bash
    cleo context status --json
    ```

    ```json
    {
      "percentage": 65,
      "status": "ok",
      "tokens_used": 52000,
      "tokens_max": 80000,
      "recommendations": []
    }
    ```
  </Tab>
</Tabs>

## Automatic Alerts

When a CLEO session is active, context alerts automatically trigger after task operations:

<CardGroup cols={2}>
  <Card title="Trigger Operations" icon="bolt">
    - `cleo complete`
    - `cleo add`
    - `cleo start`
    - Session lifecycle commands
  </Card>
  <Card title="Alert Format" icon="bell">
    Visual box on stderr with usage percentage, status, and recommended actions
  </Card>
</CardGroup>

### Alert Example

```
+------------------------------------------+
|  CONTEXT ALERT: 85% (Caution)            |
|  Consider compacting soon                |
|  Run: cleo context for details           |
+------------------------------------------+
```

<Note>
Alerts only trigger on threshold crossings to avoid noise. Moving from 68% to 72% triggers a warning, but 72% to 75% does not.
</Note>

### Configuration

```bash
# View current settings
cleo config get contextAlerts

# Enable/disable alerts
cleo config set contextAlerts.enabled true

# Customize thresholds
cleo config set contextAlerts.warningThreshold 70
cleo config set contextAlerts.cautionThreshold 85
cleo config set contextAlerts.criticalThreshold 90
cleo config set contextAlerts.emergencyThreshold 95
```

## Multi-Session Context

Track context across multiple sessions:

```bash
# List all context state files
cleo context list

# Check specific session
cleo context --session <session-id>
```

## Response Strategies

<AccordionGroup>
  <Accordion title="Warning (70-84%)" icon="triangle-exclamation">
    **Status**: Continue with awareness

    **Actions**:
    - Complete current task before starting new ones
    - Avoid loading large files
    - Use `cleo find` instead of `cleo list` for minimal output
    - Consider summarizing recent work

    ```bash
    # Efficient task discovery
    cleo find "auth"           # Minimal output
    cleo show T001             # Full details only when needed
    ```
  </Accordion>

  <Accordion title="Caution (85-89%)" icon="hand">
    **Status**: Prepare to compact

    **Actions**:
    - Document current progress
    - Save important context to task notes
    - Plan compaction strategy

    ```bash
    # Save progress
    cleo update T001 --notes "Current state: implementing JWT validation"

    ```
  </Accordion>

  <Accordion title="Critical (90-94%)" icon="exclamation-circle">
    **Status**: Compact immediately

    **Actions**:
    - Complete or pause current task
    - Run compaction
    - Resume with fresh context

    ```bash
    # Document and pause
    cleo update T001 --notes "Pausing for context refresh"
    cleo session suspend --note "Context limit reached"

    # After compaction, resume
    cleo session resume
    cleo current
    ```
  </Accordion>

  <Accordion title="Emergency (95%+)" icon="fire">
    **Status**: Save work immediately

    **Actions**:
    - Save all uncommitted work
    - End session with detailed notes
    - Do not start new tasks

    ```bash
    # Emergency save

    cleo session end --note "Context emergency. Resume from: ..."
    ```
  </Accordion>
</AccordionGroup>

## Best Practices

<CardGroup cols={2}>
  <Card title="Use Efficient Commands" icon="bolt">
    Prefer `cleo find` over `cleo list` for task discovery. 99% less context usage.
  </Card>
  <Card title="Regular Check-ins" icon="clock">
    Run `cleo context` periodically, especially during long sessions.
  </Card>
  <Card title="Proactive Notes" icon="sticky-note">
    Document progress in task notes before hitting limits.
  </Card>
  <Card title="Session Boundaries" icon="flag">
    Use sessions to create natural checkpoints for context management.
  </Card>
</CardGroup>

## Integration with Workflows

```bash
# Start of work
cleo session start
cleo context                   # Check initial state

# During work
cleo start T001
# ... work ...
cleo context check && echo "OK" || echo "Check usage"

# End of work
cleo complete T001
cleo archive
cleo context                   # Final check
cleo session end
```

## Next Steps

<CardGroup cols={2}>
  <Card title="Multi-Agent Setup" icon="users" href="/guides/multi-agent">
    Configure for parallel agents
  </Card>
  <Card title="Orchestrator Protocol" icon="network-wired" href="/guides/orchestrator">
    Advanced multi-agent coordination
  </Card>
</CardGroup>
