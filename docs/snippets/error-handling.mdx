---
title: "Error Handling"
description: "Reusable snippet for error handling best practices"
icon: "puzzle-piece"
---

### Error Handling Best Practices

<Warning>
**NEVER ignore exit codes.** Failed commands mean tasks were NOT created/updated.
</Warning>

**After EVERY command, check:**

1. Exit code `0` = success, `1-22` = error, `100+` = special (not error)
2. JSON field `"success": false` = operation failed
3. **Execute `error.fix`** - Copy-paste-ready command to resolve the error
4. **Or choose from `error.alternatives`** - Array of `{action, command}` options
5. Check `error.context` for structured error data

### Common Error Codes

| Exit | Code | Meaning | Fix |
|:----:|------|---------|-----|
| 6 | `E_VALIDATION_*` | Validation failed | Check field lengths, escape `$` in notes |
| 10 | `E_PARENT_NOT_FOUND` | Parent doesn't exist | Verify with `cleo exists <parent-id>` |
| 11 | `E_DEPTH_EXCEEDED` | Max depth (3) exceeded | Use shallower hierarchy |
| 12 | `E_SIBLING_LIMIT` | Too many siblings (7) | Move task to different parent |
| 4 | `E_NOT_FOUND` | Task doesn't exist | Use `cleo find` or `cleo list` |

### Shell Escaping

Always escape `$` as `\$` in notes to prevent shell interpolation:

```bash
cleo update T001 --notes "Price: \$395"  # Correct
cleo update T001 --notes "Price: $395"   # WRONG - $395 interpreted as variable
```

<Tip>
Recoverable errors (retry with backoff): 7, 20, 21, 22
Special codes (not errors): 100 = no data, 101 = already exists, 102 = no change needed
</Tip>

### Token-Optimized Error Output

Error context is minimal by default (~1K chars vs 15K). For full debugging context:

```bash
CLEO_VERBOSE=1 cleo session start --name "debug"
```
